<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
        content="width=device-width, maximum-scale=1.0, minimum-scale=1, user-scalable=yes,initial-scale=1.0" />
    <title>Funny Sanke Game!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #201d22;
        }

        .game-info {
            padding: 20px 0 0;
            background-color: #000;
            color: #fff;
            text-align: center;
        }

        #score {
            padding: 0 0 20px;
            font-size: 30px;
            font-weight: 500;
        }

        #screen {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0 0;
            height: 100%;
            width: 100%;
        }

        .btn {
            flex: 1 1 auto;
            margin: 10px;
            padding: 15px 45px;
            text-align: center;
            transition: 0.5s;
            background-size: 200% auto;
            color: rgb(255, 255, 255);
            background-image: linear-gradient(to right, #654ea3 0%, #eaafc8 51%, #654ea3 100%);
            box-shadow: 0 0 20px #eee;
            border-radius: 10px;
            font-size: 20px;
            font-weight: 600;
        }

        .btn:hover {
            background-position: right center;
        }

        #sub-option {
            display: none;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 300;
            width: 100%;
            height: 100%;
            vertical-align: middle;
            background: rgba(0, 0, 0, 0.8);

        }

        #sub-option p {
            display: flex;
            justify-content: center;
            align-items: center;
<<<<<<< HEAD
=======
            position: relative;
            z-index: 100;
>>>>>>> parent of e9b0d55 (edit: game over message)
            font-size: 50px;
        }

        #sub-option.on {
            display: flex;
        }

        #snake-map {
            position: relative;
            height: 850px;
            width: 850px;
            background-image: url("img/bg-snake.jpeg");
            background-size: cover;

        }

        .snake {
            position: absolute;
            top: 0;
            left: 0;
            width: 50px;
            height: 50px;
            z-index: 200;
            background: url(img/img-monster.png) no-repeat center center/100%;
        }

        .food {
            position: absolute;
            top: 0;
            left: 0;
            background-color: gold;
            height: 50px;
            width: 50px;
            border-radius: 50%;
            z-index: 200;
            background: url(img/img-star.png) no-repeat center center/100%;
        }

        .mobile-direction-key {
            display: block;
            margin: 0 auto;
            padding: 20px 0;
            width: 50vw;
            height: auto;
            text-align: center;
        }

        .mobile-direction-key a {
            display: inline-block;
            width: 40px;
            height: 40px;
            background-repeat: no-repeat;
            background-position: center center;
            background-size: 100%;
            text-indent: -99999px;
        }

        #btn-up {
            display: block;
            margin: 0 auto;
            background-image: url(img/up-arrow-y.png);
        }

        #btn-down {
            display: block;
            margin: 0 auto;
            background-image: url(img/down-arrow-y.png);
        }

        #btn-left {
            margin: 0 10% 0 0;
            background-image: url(img/left-arrow-y.png);
        }

        #btn-right {
            margin: 0 0 0 10%;
            background-image: url(img/right-arrow-y.png);
        }

        #btn-change-charactor {
            display: block;
        }

        @media screen and (max-width: 1024px) {

            #score-board {
                padding: 20px 0 0;
            }

            #score {
                padding: 0 0 10px;
            }

            .game-info {
                padding: 0 0 20px;
            }

            #score {
                font-size: 20px;
            }

            .btn {
                margin: 0;
                padding: 10px 30px;
                font-size: 15px
            }

            #snake-map {
                height: 480px;
                width: 480px;
            }

            #sub-option p {
                font-size: 30px;
            }

            .snake {
                width: 20px;
                height: 20px;
            }

            .food {
                height: 20px;
                width: 20px;
            }

            @media screen and (max-width: 480px) {
                #snake-map {
                    height: 320px;
                    width: 320px;
                }
            }

        }
    </style>
</head>

<body>

    <body>

        <div id="game-wrap">
            <div id="score-board" class="game-info">
                <p id="score">ğŸ›¸ ì¬ë¯¸ìˆëŠ” ìš°ì£¼ ìŠ¤ë„¤ì´í¬ ê²Œì„ ğŸ‘½</p>
                <div id="sub-option">
                    <p> ğŸ’€ ê²Œì„ì˜¤ë²„ ğŸ’€</p>
                </div>
            </div>
            <div id="game-start" class="game-info">
                <button class="btn" id="do-play">ê²Œì„ ì‹œì‘!</button>
                <!-- <a class="btn" href="giraff-game.html" target="_blank" title="ê¸°ë¦° ê²Œì„(ì´ì „ë²„ì „)" >ê¸°ë¦°ê²Œì„(ì´ì „ë²„ì „)</a>-->
            </div>
            <div id="screen">
                <div id="snake-map"></div>
            </div>
            <div class="mobile-direction-key">
                <a href="#a" id="btn-up">Up</a>
                <a href="#a" id="btn-left">Left</a>
                <a href="#a" id="btn-right">Right</a>
                <a href="#a" id="btn-down">down</a>
            </div>
        </div>

        </div>

    </body>
    <script>
        //========================================================================================================================================
        // @brief ìš°ì£¼ë¥¼ í…Œë§ˆë¡œ í•œ ìŠ¤ë„¤ì´í¬ ê²Œì„
        // @details 
        //  1. ìŠ¤ë„¤ì´í¬ê²Œì„ì˜ í‹€ì€ ê°™ê³  ìš°ì£¼ë¥¼ í…Œë§ˆë¡œ í•˜ì˜€ë‹¤. 
        //  2. html, css, Javascriptë§Œì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•˜ì˜€ë‹¤.
        // @author : ì´ì§€ì—°
        // @date : 2022-06-19
        // @version : 0.1
        //========================================================================================================================================
        var App = new Object();
        //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
        // ëª¨ë“ˆí™” ì‚¬ìš©ì„ ìœ„í•œ ê°ì²´ ìƒì„±
        //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
        document.addEventListener("DOMContentLoaded", function (event) {
            App.snakeGame.init();

        });

        App.snakeGame = function () {
            var self;
            var mapHeight, mapWidth, blockSize;
            var snake, snakeHead;
            var gameMap, scoreText, playButton, messageBox, btnUp, btnDown, btnLeft, btnRight;
            var colMove, rowMove;
            var sankeDirection, snakeDead, snakeEating, playGame, gameOver, gameLoop, speed, gameScore;
            var foods;
            return {
                init: function () {
                    self = this;
                    //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
                    // ë§µ ìƒì„± (PC, Mobile) - ë§µ ë„“ì´ / ë¸”ë¡ í¬ê¸°
                    //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
                    mapHeight = 17;
                    mapWidth = 17; // = 850 / 50
                    blockSize = 50;

                    window.addEventListener('resize', function (event) {
                        mobileSetting()
                    }, true);

                    function mobileSetting() {
                        if (window.innerWidth <= 1024) {
                            mapHeight = 24;
                            mapWidth = 24; // = 480 / 20
                            blockSize = 20;
                        }
                        if (window.innerWidth <= 480) {
                            mapHeight = 16;
                            mapWidth = 16; // = 320 / 20
                            blockSize = 20;
                        }
                    }

                    self.settingGamePlay();
                },
                settingGamePlay: function () {
                    //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
                    // ë±€ ë°©í–¥ ì„¤ì •
                    //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
                    var directions = {
                        up: 0,
                        right: 1,
                        down: 2,
                        left: 3
                    }
                    //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
                    // ë±€ ì´ë™ ì„¤ì •
                    //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
                    colMove = [0, 1, 0, -1];
                    rowMove = [-1, 0, 1, 0];

                    //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
                    // ê¸°ë³¸ ì˜µì…˜ ì…‹íŒ…
                    //â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-
                    sankeDirection = directions["down"]; // ë±€ ê¸°ë³¸ ì´ë™ ë°©í–¥
                    snakeDead = false; // ë±€ ì‚¬ë§
                    snakeEating = false; // ë±€ ì‹ì‚¬
                    playGame = false; // ê²Œì„ ì§„í–‰ ì—¬ë¶€
                    gameOver = false; // ê²Œì„ ì˜¤ë²„ ì—¬ë¶€
                    gameLoop; // ê²Œì„ ì‹¤í–‰ ê³¼ì •
                    speed = 140; // ë±€ ì†ë„ ì„¤ì •
                    gameScore = 0; // ì ìˆ˜ ì´ˆê¸°ê°’

                    gameMap = document.getElementById("snake-map"); // ê²Œì„ ì§€ë„ ì˜ì—­
                    scoreText = document.getElementById("score"); // ì ìˆ˜íŒ ì˜ì—­
                    playButton = document.getElementById("do-play"); // ê²Œì„ ì‹¤í–‰ ë²„íŠ¼
                    messageBox = document.getElementById("sub-option"); // ê²Œì„ ì˜¤ë²„ ë©”ì„¸ì§€ ì˜ì—­
                    btnUp = document.getElementById("btn-up"); // ë°©í–¥í‚¤ ìœ„
                    btnDown = document.getElementById("btn-down"); // ë°©í–¥í‚¤ ì•„ë˜
                    btnLeft = document.getElementById("btn-left"); // ë°©í–¥í‚¤ ì™¼ìª½
                    btnRight = document.getElementById("btn-right"); // ë°©í–¥í‚¤ ì˜¤ë¥¸ìª½
               
                    /*
                        @brief: ë±€ ì´ë™
                        @return: ë±€ ì´ë™ ë°©í–¥ ê°’ ë¦¬í„´
                        @param: event
                    */
                    document.onkeydown = moveSnake;
                    moveSnakeMobile();

                    function moveSnake(e) {
                        e = e || window.event;

                        if (e.keyCode == '38') {
                            // up arrow
                            sankeDirection = directions["up"];
                            
                        } else if (e.keyCode == '40') {
                            // down arrow
                            sankeDirection = directions["down"];
                        } else if (e.keyCode == '37') {
                            // left arrow
                            sankeDirection = directions["left"];
                        } else if (e.keyCode == '39') {
                            // right arrow
                            sankeDirection = directions["right"];
                        }

                    }

                    function moveSnakeMobile(event) {
                        btnUp.addEventListener('click', function (event) {
                            // up arrow
                            sankeDirection = directions["up"];
                        });
                        btnDown.addEventListener('click', function (event) {
                            // down arrow
                            sankeDirection = directions["down"];
                        });
                        btnLeft.addEventListener('click', function (event) {
                            // left arrow
                            sankeDirection = directions["left"];
                        });
                        btnRight.addEventListener('click', function (event) {
                            // right arrow
                            sankeDirection = directions["right"];
                        });
                    }
                    snake = [];
                    snakeHead = new self.SnakePiece(2, 3);

                    foods = [];
                    foods.push(new self.FoodPiece());

                    // ë±€ì— ë¨¸ë¦¬ ì¶”ê°€ 
                    snake.push(snakeHead);

                    self.gamePlay()

                },
                // ê²Œì„ ì‹¤í–‰
                gamePlay: function () {
                    playButton.addEventListener('click', function () {

                        playGame = !playGame;
                        if (playGame) {
                            self.play();
                        } else {
                            clearInterval(gameLoop);
                        }
                    })

                },
                // ì£½ì—ˆëŠ”ì§€ í™•ì¸
                isDying: function () {
                    // ë²½ì— ë¶€ë”ªí˜”ì„ ë•Œ
                    var head = snake[0];
                    if (head.row < 0 || head.row >= mapHeight || head.col < 0 || head.col >= mapWidth) {
                        return true;
                    }
                    // ìê¸° ëª¸ì— ë¶€ë”ªí˜”ì„ ë•Œ
                    var i;
                    for (i = 1; i < snake.length; i++) {
                        var curPiece = snake[i];
                        if (head.row === curPiece.row && head.col === curPiece.col) { // ë¨¸ë¦¬ì˜ ìœ„ì¹˜ì™€ ëª¸ì˜ ìœ„ì¹˜ê°€ ë§Œë‚  ë•Œ
                            return true;
                        }
                    }
                    return false;
                },
                // ì‚¬ê³¼ ë¨¹ê¸°
                isEating: function () {
                    var head = snake[0];
                    var i;
                    for (i = 0; i < foods.length; i++) {
                        var curPiece = foods[i];
                        if (head.row === curPiece.row && head.col === curPiece.col) { // ì‚¬ê³¼ì˜ ìœ„ì¹˜ì™€ ëª¸ì˜ ìœ„ì¹˜ê°€ ë§Œë‚  ë•Œ

                            foods.splice(i, 1); //ë°°ì—´ ë³€ê²½ì„ ì‹œì‘í•  ì¸ë±ìŠ¤ i, ë°°ì—´ì—ì„œ ì œê±°í•  ìš”ì†Œì˜ ìˆ˜ 1 - ì‚¬ê³¼ì˜ ë°°ì—´ì—ì„œ ì œê±°
                            gameMap.removeChild(curPiece.el); // appleì„ ì œê±°
                            return true;

                        }
                    }
                    return false;
                },
                // ê²Œì„ ì‹¤í–‰í•˜ë©´ ë°˜ë³µë˜ëŠ” í•¨ìˆ˜ë“¤
                play: function () {
                    gameLoop = setInterval(function () {

                        // ë±€ ìë™ ì´ë™
                        snake.unshift(new self.SnakePiece(snake[0].row + rowMove[sankeDirection], snake[
                            0].col + colMove[sankeDirection]));

                        // ì‚¬ê³¼ë¥¼ ë¨¹ì—ˆì„ ë•Œ ê¼¬ë¦¬ ì•ˆì§€ì›€
                        snakeEating = self.isEating();
                        if (snakeEating) {
                            gameScore = gameScore + 10;
                        }
                        // ì‚¬ê³¼ ë¨¹ì§€ ì•Šì•˜ì„ë•ŒëŠ” ê¼¬ë¦¬ë¥¼ í•˜ë‚˜ì”© ì§€ì›€
                        if (!snakeEating) {
                            gameMap.removeChild(snake.pop().el);
                        }
                        // ë±€ì´ ì£½ì—ˆì„ ë•Œ 
                        snakeDead = self.isDying();
                        if (snakeDead) {
                            playGame = false;
                            self.handleDeath();
                        }

                        snakeEating = false;
                        snakeDead = false;

                        scoreText.innerText = "ğŸ”¥ í˜„ì¬ ì ìˆ˜ ğŸ”¥: " + gameScore;

                        if (!gameOver) {
                            playButton.innerText = playGame ? "ë©ˆì¶°!" : "ê²Œì„ ì‹œì‘!";
                        }

                        // ì‚¬ê³¼ ë‹¤ë¨¹ìœ¼ë©´ ë‹¤ì‹œ ìƒì„±
                        if (foods.length < 1) {
                            foods.push(new self.FoodPiece());
                        }
                    }, speed);
                },
                // ë±€ì´ ì£½ì—ˆì„ ë•Œ ì‹¤í–‰
                handleDeath: function () {

                    // ê²Œì„ ë©ˆì¶”ê¸° 
                    clearInterval(gameLoop);

                    // ì£½ì€ ë©”ì„¸ì§€ 
                    gameOver = true;
                    messageBox.classList.add('on')

                    // ë±€ ì§€ìš°ê¸°
                    while (snake[0]) {
                        gameMap.removeChild(snake.pop().el);
                    }

                    // ìŠ¤ë„¤ì´í¬ ë¦¬ìŠ¤í°
                    setTimeout(function () {
                        scoreText.innerText = "ğŸ›¸ ì¬ë¯¸ìˆëŠ” ìš°ì£¼ê²Œì„ ğŸ‘½ ";
                        playButton.innerText = "ê²Œì„ ì‹œì‘!";
                        messageBox.classList.remove('on');
                        gameScore = 0

                        // ê²Œì„ ì´ˆê¸°í™”
                        snakeHead = new self.SnakePiece(1, 1);
                        snake.push(snakeHead);
                        gameOver = false;

                    }, 1500);
                },
                // ì‚¬ê³¼ ê°ì²´ ìƒì„±
                FoodPiece: function () {
                    var col = self.getRandomNum(0, mapWidth);
                    var row = self.getRandomNum(0, mapHeight);
                    var apple = document.createElement("div");
                    apple.className = "food";
                    apple.style.top = (row * blockSize) + "px";
                    apple.style.left = (col * blockSize) + "px";
                    gameMap.appendChild(apple);

                    this.col = col;
                    this.row = row;
                    this.el = apple;
                },
                /// ìŠ¤ë„¤ì´í¬ ëª¸ ê°ì²´ ìƒì„± 
                SnakePiece: function (row, col) {
                    /* ìŠ¤ë„¤ì´í¬ ìƒì„± */
                    var snakeBody = document.createElement("div");
                    snakeBody.className = "snake";
                    snakeBody.style.top = (row * blockSize) + "px";
                    snakeBody.style.left = (col * blockSize) + "px";

                    gameMap.appendChild(snakeBody);

                    this.col = col;
                    this.row = row;
                    this.el = snakeBody;
                },
                /* ë‚œìˆ˜ ìƒì„± */
                getRandomNum: function (min, max) {
                    return Math.floor(Math.random() * (max - min));
                }
            }
        }();
    </script>
</body>

</html>