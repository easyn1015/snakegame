<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        h1 {
            margin: 50px 0;
            text-align: center;
        }

        .snake-wrap {
            display: flex;
            position: relative;
            flex-wrap: wrap;
            margin: 50px auto;
            width: 289px;
            height: 289px;
            border: 1px solid #000;
        }

        .snake-wrap>div {
            width: 17px;
            height: 17px;
            border: 1px solid #000;
            box-sizing: border-box;
        }

        #snake {
            position: absolute;
            top: 0;
            left: 0;
            width: 17px;
            height: 17px;
            background: #ab28ff
        }
    </style>
</head>

<body>

    <h1>ğŸ¸ ì¬ë¯¸ìˆëŠ” ìŠ¤ë„¤ì´í¬ ê²Œì„ ğŸ</h1>
    <div class="snake-wrap">
        <div id="snake"></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</body>

</html>
<script>
    /* ìŠ¤ë„¤ì´í¬ ê²Œì„ ì‹œì‘ 1 - ëœë¤ ì¶œëª° */
    const square = document.querySelectorAll('.snake-wrap > div');
    const squareNum = square.length;
    const randomNum = Math.floor(Math.random() * squareNum + 1);
    const randomElement = document.querySelectorAll('.snake-wrap > div')[randomNum];
    const clientRect = randomElement.getBoundingClientRect();
    //Math.random 0~1 ì‚¬ì´ì˜ ë‚œìˆ˜ ìƒì„±
    //Math.floor ì†Œìˆ˜ì ì„ ë‚´ë¦¼ì‹œì¼œ ì •ìˆ˜ë¡œ ë§Œë“¦
    //Math.floor(Math.random() * 10) // 0~9ì˜ ëœë¤ ì •ìˆ˜ ì¶œë ¥
    //Math.floor(Math.random() * 10) + 1 //1~10ì˜ ëœë¤ ì •ìˆ˜ ì¶œë ¥

    function getAbsoluteTop(element) { //ìš”ì†Œì˜ top ì ˆëŒ€ìœ„ì¹˜ë¥¼ êµ¬í•˜ëŠ” í•¨ìˆ˜
        return window.pageYOffset + element.getBoundingClientRect().top;

    }

    function getAbsoluteLeft(element) { //ìš”ì†Œì˜ left ì ˆëŒ€ìœ„ì¹˜
        return window.pageYOffset + element.getBoundingClientRect().left;
    }
    const parentElement = randomElement.parentElement; //ëœë¤ ìš”ì†Œì˜ ë¶€ëª¨
    const parentAbsoluteTop = getAbsoluteTop(parentElement); // ë¶€ëª¨ì˜ ì ˆëŒ€ top ê°’
    const parentAbsoluteLeft = getAbsoluteLeft(parentElement); // ë¶€ëª¨ì˜ ì ˆëŒ€ left ê°’
    const absoluteTop = getAbsoluteTop(randomElement); //ëœë¤ ìš”ì†Œì˜ ì ˆëŒ€ top ê°’
    const absoluteLeft = getAbsoluteLeft(randomElement); //ëœë¤ ìš”ì†Œì˜ ì ˆëŒ€ left ê°’

    const relativeTop = absoluteTop - parentAbsoluteTop; //ëœë¤ ìš”ì†Œì˜ ìƒëŒ€ top ê°’ - ë¶€ëª¨ì˜ ìƒëŒ€ top ê°’
    const relativeLeft = absoluteLeft - parentAbsoluteLeft; //ëœë¤ ìš”ì†Œì˜ ìƒëŒ€ left ê°’ - ë¶€ëª¨ì˜ ìƒëŒ€ left ê°’

    document.getElementById('snake').style.left = relativeLeft - 1 + 'px';
    document.getElementById('snake').style.top = relativeTop - 1 + 'px';


    /* ìŠ¤ë„¤ì´í¬ ê²Œì„ ì‹œì‘ 2 - ì´ë™ */


    window.addEventListener('keydown', moveSnake);
    
    function moveSnake(e) {

        switch (e.keyCode) {
            case 37: //left arrow key
                moveLeft();
                break;
            case 38: //Up arrow key
                moveUp();
                break;
            case 39: //right arrow key
                moveRight();
                break;
            case 40: //down arrow key
                moveDown();
                break;
        }

    }
    

    function moveLeft() {
        document.getElementById('snake').style.left = parseInt(document.getElementById('snake').style.left) - 17 + 'px';
    }

    function moveUp() {
        document.getElementById('snake').style.top = parseInt(document.getElementById('snake').style.top) - 17 + 'px';
    }

    function moveRight() {
        document.getElementById('snake').style.left = parseInt(document.getElementById('snake').style.left) + 17 + 'px';
    }

    function moveDown() {
        document.getElementById('snake').style.top = parseInt(document.getElementById('snake').style.top) + 17 + 'px';
    }
</script>