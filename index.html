<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funny Sanke Game!!</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #4e54c8;
            /* fallback for old browsers */
            background: -webkit-linear-gradient(to right, #8f94fb, #4e54c8);
            /* Chrome 10-25, Safari 5.1-6 */
            background: linear-gradient(to right, #8f94fb, #4e54c8);
            /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */

            min-height: 100vh;
            background-repeat: no-repeat;

        }

        h1 {
            margin: 0 0 50px;
            text-align: center;
            color: #a4f753;
        }

        #snake-wrap {
            display: flex;
            position: relative;
            flex-wrap: wrap;
            margin: 50px auto;
            width: 510px;
            height: 510px;
            background: #000;

        }

        #snake-wrap div {
            width: 30px;
            height: 30px;
            border: 1px solid #000;
            box-sizing: border-box;
        }

        #apple {
            position: absolute;
            top: 0;
            left: 0;
            width: 30px;
            height: 30px;
        }

        #apple:before {
            content: 'ğŸ•';
            font-size: 30px;
            line-height: 30px;
        }

        #snake-wrap #snake {
            position: absolute;
            top: 0;
            left: 0;
            width: 30px;
            min-height: 30px;
            border:none;
            background: url(img/giraff-head.png) no-repeat center top/30px;

        }

        /*#snake:before {
            content: 'ğŸ²';
            font-size: 30px;
            line-height: 30px;
        }*/

        .btn-start {
            display: block;
            text-decoration: none;
            color: inherit;
        }

        #snake-wrap #tail {
            position: relative;
            top: 100%;
            left: 0;
            width: 30px;
            height: 30px;
            border:none;
            background: url(img/giraff-neck.png) no-repeat center center/cover;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <h1>ğŸ ì¬ë¯¸ìˆëŠ” ê¸°ë¦°... ê²Œì„.. ğŸ¦’</h1>
        <div id="snake-wrap">
            <div id="apple"></div>
            <div id="snake"></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <a href="#a" title="ì‹œì‘í•˜ê¸°" id="btn-start">ì‹œì‘í•˜ê¸°</a>
    </div>

</body>

</html>
<script>
    /* ìŠ¤ë„¤ì´í¬ ê²Œì„ ì‹œì‘ 1 - ëœë¤ ì¶œëª° */
    const apple = document.getElementById('apple');
    const snake = document.getElementById('snake');
    const square = document.querySelectorAll('#snake-wrap > div');
    const snakeWidth = snake.offsetWidth;
    const squareNum = square.length - 2;
    const snakeBoxWidth = document.getElementById('snake-wrap').offsetWidth - 2;
    const randomNum = Math.floor(Math.random() * squareNum + 1);
    const randomElement = document.querySelectorAll('#snake-wrap > div')[randomNum];
    const clientRect = randomElement.getBoundingClientRect();
    const startBtn = document.getElementById('btn-start');

    //Math.random 0~1 ì‚¬ì´ì˜ ë‚œìˆ˜ ìƒì„±
    //Math.floor ì†Œìˆ˜ì ì„ ë‚´ë¦¼ì‹œì¼œ ì •ìˆ˜ë¡œ ë§Œë“¦
    //Math.floor(Math.random() * 10) // 0~9ì˜ ëœë¤ ì •ìˆ˜ ì¶œë ¥
    //Math.floor(Math.random() * 10) + 1 //1~10ì˜ ëœë¤ ì •ìˆ˜ ì¶œë ¥
    randomApple()

    function randomApple() {
        function getAbsoluteTop(element) { //ìš”ì†Œì˜ top ì ˆëŒ€ìœ„ì¹˜ë¥¼ êµ¬í•˜ëŠ” í•¨ìˆ˜
            return window.pageYOffset + element.getBoundingClientRect().top;
        }

        function getAbsoluteLeft(element) { //ìš”ì†Œì˜ left ì ˆëŒ€ìœ„ì¹˜
            return window.pageYOffset + element.getBoundingClientRect().left;
        }
        const parentElement = randomElement.parentElement; //ëœë¤ ìš”ì†Œì˜ ë¶€ëª¨
        const parentAbsoluteTop = getAbsoluteTop(parentElement); // ë¶€ëª¨ì˜ ì ˆëŒ€ top ê°’
        const parentAbsoluteLeft = getAbsoluteLeft(parentElement); // ë¶€ëª¨ì˜ ì ˆëŒ€ left ê°’
        const absoluteTop = getAbsoluteTop(randomElement); //ëœë¤ ìš”ì†Œì˜ ì ˆëŒ€ top ê°’
        const absoluteLeft = getAbsoluteLeft(randomElement); //ëœë¤ ìš”ì†Œì˜ ì ˆëŒ€ left ê°’

        const relativeTop = absoluteTop - parentAbsoluteTop; //ëœë¤ ìš”ì†Œì˜ ìƒëŒ€ top ê°’ - ë¶€ëª¨ì˜ ìƒëŒ€ top ê°’
        const relativeLeft = absoluteLeft - parentAbsoluteLeft; //ëœë¤ ìš”ì†Œì˜ ìƒëŒ€ left ê°’ - ë¶€ëª¨ì˜ ìƒëŒ€ left ê°’

        apple.style.left = relativeLeft + 'px';
        apple.style.top = relativeTop + 'px';

        /* ë±€ê³¼ ê²¹ì¹˜ì§€ ì•Šê²Œ í•˜ê¸° */
        if (apple.style.left == 0 + 'px' && apple.style.top == 0 + 'px') {
            apple.style.left = snakeWidth + 'px';
            apple.style.top = snakeWidth + 'px';
        }
    }
    startBtn.addEventListener('click', function () {
        snakeMoving()
    });

    function snakeMoving() {
        var i = 0;
        var go = setInterval(function () {
            if (i++ < snakeBoxWidth - 30) {
                i += 30
                snake.style.top = i + 'px'
            } else {
                clearInterval(go);
                alert('ìœ¼ì•…!ğŸ˜µ')
                snake.style.top = 0
                snake.style.left = 0
            }
        }, 100)

    }
    /* ìŠ¤ë„¤ì´í¬ ê²Œì„ ì‹œì‘ 2 - ì´ë™ */
    window.addEventListener('keydown', moveSnake);

    function moveSnake(e) {
        switch (e.keyCode) {
            case 37: //left arrow key
                moveLeft();
                break;
            case 38: //Up arrow key
                moveUp();
                break;
            case 39: //right arrow key
                moveRight();
                break;
            case 40: //down arrow key
                moveDown();
                break;
        }
        warning();
        eatApple();


    }


    function moveLeft() {
        snake.style.left = snake.offsetLeft - snakeWidth + 'px';
        snake.offsetLeft
    }

    function moveUp() {
        snake.style.top = snake.offsetTop - snakeWidth + 'px';
        snake.offsetTop
    }

    function moveRight() {
        snake.style.left = snake.offsetLeft + snakeWidth + 'px';
        snake.offsetLeft
    }

    function moveDown() {
        snake.style.top = snake.offsetTop + snakeWidth + 'px';
        snake.offsetTop

    }



    function warning() {
        if (snake.offsetLeft >= snakeBoxWidth || snake.offsetTop >= snakeBoxWidth) {
            alert('ìœ¼ì•…!ğŸ˜µ')
            snake.style.top = 0
            snake.style.left = 0
            document.getElementById("snake").innerHTML = "";


        } else if (snake.offsetLeft < 0 || snake.offsetTop < 0) {
            alert('ìœ¼ì•…!ğŸ˜µ')
            snake.style.top = 0
            snake.style.left = 0
            document.getElementById("snake").innerHTML = "";
        }
    }

    function eatApple() {
        if (apple.offsetLeft == snake.offsetLeft && apple.offsetTop == snake.offsetTop) {
            const newTail = document.createElement("div")
            newTail.setAttribute('id', 'tail');
            snake.appendChild(newTail);
            console.log('same')
        }

    }
</script>