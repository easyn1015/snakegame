<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funny Sanke Game!!</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #4e54c8;
            /* fallback for old browsers */
            background: -webkit-linear-gradient(to right, #8f94fb, #4e54c8);
            /* Chrome 10-25, Safari 5.1-6 */
            background: linear-gradient(to right, #8f94fb, #4e54c8);
            /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */

            min-height: 100vh;
            background-repeat: no-repeat;

        }

        h1 {
            margin: 0 0 50px;
            text-align: center;
            color: #a4f753;
        }

        #snake-wrap {
            display: flex;
            position: relative;
            flex-wrap: wrap;
            margin: 50px auto;
            width: 510px;
            height: 510px;
            background: #000;

        }

        #snake-wrap div {
            width: 30px;
            height: 30px;
            border: 1px solid #000;
            box-sizing: border-box;
        }

        #apple {
            position: absolute;
            top: 0;
            left: 0;
            width: 30px;
            height: 30px;
        }

        #apple:before {
            content: 'üçï';
            font-size: 30px;
            line-height: 30px;
        }

        #snake-wrap #snake {
            position: absolute;
            top: 0;
            left: 0;
            width: 30px;
            min-height: 30px;
            border:none;
            background: url(img/giraff-head.png) no-repeat center top/30px;

        }

        /*#snake:before {
            content: 'üê≤';
            font-size: 30px;
            line-height: 30px;
        }*/

        .btn-start {
            display: block;
            text-decoration: none;
            color: inherit;
        }

        #snake-wrap #tail {
            position: relative;
            top: 100%;
            left: 0;
            width: 30px;
            height: 30px;
            border:none;
            background: url(img/giraff-neck.png) no-repeat center center/cover;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <h1>üêç Ïû¨ÎØ∏ÏûàÎäî Í∏∞Î¶∞... Í≤åÏûÑ.. ü¶í</h1>
        <div id="snake-wrap">
            <div id="apple"></div>
            <div id="snake"></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <a href="#a" title="ÏãúÏûëÌïòÍ∏∞" id="btn-start">ÏãúÏûëÌïòÍ∏∞</a>
    </div>

</body>

</html>
<script>
    /* Ïä§ÎÑ§Ïù¥ÌÅ¨ Í≤åÏûÑ ÏãúÏûë 1 - ÎûúÎç§ Ï∂úÎ™∞ */
    const apple = document.getElementById('apple');
    const snake = document.getElementById('snake');
    const square = document.querySelectorAll('#snake-wrap > div');
    const snakeWidth = snake.offsetWidth;
    const squareNum = square.length - 2;
    const snakeBoxWidth = document.getElementById('snake-wrap').offsetWidth - 2;
    const randomNum = Math.floor(Math.random() * squareNum + 1);
    const randomElement = document.querySelectorAll('#snake-wrap > div')[randomNum];
    const clientRect = randomElement.getBoundingClientRect();
    const startBtn = document.getElementById('btn-start');

    //Math.random 0~1 ÏÇ¨Ïù¥Ïùò ÎÇúÏàò ÏÉùÏÑ±
    //Math.floor ÏÜåÏàòÏ†êÏùÑ ÎÇ¥Î¶ºÏãúÏºú Ï†ïÏàòÎ°ú ÎßåÎì¶
    //Math.floor(Math.random() * 10) // 0~9Ïùò ÎûúÎç§ Ï†ïÏàò Ï∂úÎ†•
    //Math.floor(Math.random() * 10) + 1 //1~10Ïùò ÎûúÎç§ Ï†ïÏàò Ï∂úÎ†•
    randomApple()

    function randomApple() {
        function getAbsoluteTop(element) { //ÏöîÏÜåÏùò top Ï†àÎåÄÏúÑÏπòÎ•º Íµ¨ÌïòÎäî Ìï®Ïàò
            return window.pageYOffset + element.getBoundingClientRect().top;
        }

        function getAbsoluteLeft(element) { //ÏöîÏÜåÏùò left Ï†àÎåÄÏúÑÏπò
            return window.pageYOffset + element.getBoundingClientRect().left;
        }
        const parentElement = randomElement.parentElement; //ÎûúÎç§ ÏöîÏÜåÏùò Î∂ÄÎ™®
        const parentAbsoluteTop = getAbsoluteTop(parentElement); // Î∂ÄÎ™®Ïùò Ï†àÎåÄ top Í∞í
        const parentAbsoluteLeft = getAbsoluteLeft(parentElement); // Î∂ÄÎ™®Ïùò Ï†àÎåÄ left Í∞í
        const absoluteTop = getAbsoluteTop(randomElement); //ÎûúÎç§ ÏöîÏÜåÏùò Ï†àÎåÄ top Í∞í
        const absoluteLeft = getAbsoluteLeft(randomElement); //ÎûúÎç§ ÏöîÏÜåÏùò Ï†àÎåÄ left Í∞í

        const relativeTop = absoluteTop - parentAbsoluteTop; //ÎûúÎç§ ÏöîÏÜåÏùò ÏÉÅÎåÄ top Í∞í - Î∂ÄÎ™®Ïùò ÏÉÅÎåÄ top Í∞í
        const relativeLeft = absoluteLeft - parentAbsoluteLeft; //ÎûúÎç§ ÏöîÏÜåÏùò ÏÉÅÎåÄ left Í∞í - Î∂ÄÎ™®Ïùò ÏÉÅÎåÄ left Í∞í

        apple.style.left = relativeLeft + 'px';
        apple.style.top = relativeTop + 'px';

        /* Î±ÄÍ≥º Í≤πÏπòÏßÄ ÏïäÍ≤å ÌïòÍ∏∞ */
        if (apple.style.left == 0 + 'px' && apple.style.top == 0 + 'px') {
            apple.style.left = snakeWidth + 'px';
            apple.style.top = snakeWidth + 'px';
        }
    }
    startBtn.addEventListener('click', function () {
        snakeMoving()
    });

    function snakeMoving() {
        var i = 0;
        var go = setInterval(function () {
            if (i++ < snakeBoxWidth - 30) {
                i += 30
                snake.style.top = i + 'px'
            } else {
                clearInterval(go);
                alert('ÏúºÏïÖ!üòµ')
                snake.style.top = 0
                snake.style.left = 0
            }
        }, 100)

    }
    /* Ïä§ÎÑ§Ïù¥ÌÅ¨ Í≤åÏûÑ ÏãúÏûë 2 - Ïù¥Îèô */
    window.addEventListener('keydown', moveSnake);

    function moveSnake(e) {
        switch (e.keyCode) {
            case 37: //left arrow key
                moveLeft();
                break;
            case 38: //Up arrow key
                moveUp();
                break;
            case 39: //right arrow key
                moveRight();
                break;
            case 40: //down arrow key
                moveDown();
                break;
        }
        warning();
        eatApple();


    }


    function moveLeft() {
        snake.style.left = snake.offsetLeft - snakeWidth + 'px';
        snake.offsetLeft
    }

    function moveUp() {
        snake.style.top = snake.offsetTop - snakeWidth + 'px';
        snake.offsetTop
    }

    function moveRight() {
        snake.style.left = snake.offsetLeft + snakeWidth + 'px';
        snake.offsetLeft
    }

    function moveDown() {
        snake.style.top = snake.offsetTop + snakeWidth + 'px';
        snake.offsetTop

    }



    function warning() {
        if (snake.offsetLeft >= snakeBoxWidth || snake.offsetTop >= snakeBoxWidth) {
            alert('ÏúºÏïÖ!üòµ')
            snake.style.top = 0
            snake.style.left = 0
            document.getElementById("snake").innerHTML = "";


        } else if (snake.offsetLeft < 0 || snake.offsetTop < 0) {
            alert('ÏúºÏïÖ!üòµ')
            snake.style.top = 0
            snake.style.left = 0
            document.getElementById("snake").innerHTML = "";
        }
    }

    function eatApple() {
        if (apple.offsetLeft == snake.offsetLeft && apple.offsetTop == snake.offsetTop) {
            const newTail = document.createElement("div")
            newTail.setAttribute('id', 'tail');
            snake.appendChild(newTail);
            console.log('same')
        }

    }
</script>